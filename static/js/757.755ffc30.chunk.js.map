{"version":3,"file":"static/js/757.755ffc30.chunk.js","mappings":"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","sources":["components/common/BackButton.tsx","components/common/UnclickableContainer.tsx","components/common/diary/WriterInfo.tsx","components/common/diary/DiarySection.tsx","components/common/diary/Sticker.tsx","components/diary-detail/DropdownMenu.tsx","constants/API_URL.ts","recoil/diary-detail/atom.ts","recoil/diary-detail/index.ts","utils/axiosApi/api.ts","utils/axiosApi/defaultApi.ts","utils/convertCoord.ts","utils/getUserId.ts","utils/time.tsx","utils/token.ts"],"sourcesContent":["import React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport tw from \"tailwind-styled-components\";\n\nimport arrowBackImg from \"../../assets/icons/arrow_back.png\";\n\nconst BackButtonImg = tw.img`\nz-10 h-[6.5vh] absolute pt-[1vh] cursor-pointer\n`;\n\nconst BackButton = () => {\n  const navigate = useNavigate();\n  return <BackButtonImg alt=\"back\" src={arrowBackImg} onClick={() => navigate(-1)} />;\n};\n\nexport default BackButton;\n","import tw from \"tailwind-styled-components\";\n\nexport const UnclickableContainer = tw.div`\nrelative bg-white/60 rounded-lg shadow-lg\nmx-auto w-[90%] p-[3vh] overflow-hidden\n`;\n","import tw from \"tailwind-styled-components\";\n\nexport const ProfileImg = tw.img`\nw-[40px] h-[40px] min-[390px]:w-[55px] min-[390px]:h-[55px] md:w-[58px] md:h-[58px] \nrounded-full object-cover shadow-lg \n`;\n\nexport const Nickname = tw.p`\ntext-[1.8vh] md:text-[1.7vh]\n`;\n\nexport const Date = tw.p`\ntext-gray-1000 text-[1.4vh] md:text-[1.2vh]\n`;\n","import React, { useState } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport tw from \"tailwind-styled-components\";\nimport Skeleton from \"react-loading-skeleton\";\nimport \"react-loading-skeleton/dist/skeleton.css\";\n\nimport { accessTokenAtom } from \"src/recoil/token\";\nimport { getUserId } from \"src/utils/getUserId\";\nimport changeToKoreanTime from \"src/utils/time\";\nimport DefaultProfileImg from \"src/assets/icons/default_profile.png\";\nimport { ProfileImg, Nickname, Date } from \"./WriterInfo\";\nimport { DropdownMenu } from \"../../diary-detail/DropdownMenu\";\nimport { Diary } from \"src/components/book/DiaryListContainer\";\n\nexport interface DiaryContainerProps {\n  data: Diary;\n  isDetailPage: boolean;\n}\n\nexport const DiarySection = ({ data, isDetailPage = true }: DiaryContainerProps) => {\n  const accessToken = useRecoilValue(accessTokenAtom);\n  const isDiaryWriter = getUserId(accessToken) === data.userId;\n  const profileImgSrc = data.profile === \"없음\" ? DefaultProfileImg : data.profile;\n  const hasPicture = data.picture !== \"없음\";\n  const isRevised = data.createdAt !== data.updatedAt;\n  const [isLoading, setIsLoading] = useState(true);\n\n  return (\n    <>\n      <div className=\"flex\">\n        <ProfileImg className=\"mr-2 md:mr-3\" src={profileImgSrc}></ProfileImg>\n        <div className=\"my-auto\">\n          <Nickname>{data.nickname}</Nickname>\n          <div className=\"flex\">\n            <Date>{changeToKoreanTime(data.updatedAt)}</Date>\n            {isRevised && <Date className=\"ml-1\">(수정됨)</Date>}\n          </div>\n        </div>\n        {isDetailPage && isDiaryWriter && (\n          <DropdownMenu deleteInfo={{ id: data.diaryId, target: \"diary\" }} />\n        )}\n      </div>\n      {hasPicture && (\n        <>\n          {isLoading && (\n            <div className=\"w-[39vh]\">\n              <PhotoSkeleton />\n            </div>\n          )}\n          <Photo\n            alt=\"picture\"\n            src={String(data.picture)}\n            onLoad={() => setIsLoading(false)}\n            style={{ display: isLoading ? \"none\" : \"block\" }}\n          />\n        </>\n      )}\n      <DiaryTitle>{data.title}</DiaryTitle>\n      <DiaryContent>{data.content}</DiaryContent>\n    </>\n  );\n};\n\nconst Photo = tw.img`\nmax-w-[90%] mt-3\n`;\n\nconst PhotoSkeleton = tw(Skeleton)`\nh-[52vh] mt-3\n`;\n\nconst DiaryTitle = tw.p`\nmt-2 text-[2.2vh] md:text-[2vh]\nwhitespace-pre-line break-all\n`;\n\nconst DiaryContent = tw.p`\npb-4 md:pb-6 text-[1.8vh] md:text-[1.6vh] \nwhitespace-pre-line break-all\n`;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport tw from \"tailwind-styled-components\";\nimport Moveable, { OnDragStart, OnDrag, OnDragEnd } from \"react-moveable\";\n\nimport { convertToAbsCoord, convertToRelativeCoord } from \"src/utils/convertCoord\";\n\nexport interface AffixedStickerInfo {\n  stickedStickerId: number;\n  stickerImg: string;\n  locX: number;\n  locY: number;\n}\n\ninterface AffixedStickerProps {\n  sticker: AffixedStickerInfo;\n  handleUpdateStickers: (newSticker: AffixedStickerInfo) => void;\n}\n\nexport const AffixedSticker = ({ sticker, handleUpdateStickers }: AffixedStickerProps) => {\n  const [targetElem, setTargetElem] = useState<HTMLElement | SVGElement | null>(null);\n  useEffect(() => {\n    const targetElem = document.querySelector(\n      `.target-${sticker.stickedStickerId}`\n    ) as HTMLElement;\n    targetElem.style.transform = `translate(${sticker.locX}vh, ${sticker.locY}vh`;\n    setTargetElem(targetElem);\n  }, []);\n\n  const hideMovableBoxStyle = useCallback(() => {\n    const moveableControlBoxArr = Array.from(\n      document.querySelectorAll<HTMLElement>(`.moveable-control-box`)\n    );\n    moveableControlBoxArr.map((moveableBox) => {\n      return (moveableBox.style.visibility = \"hidden\");\n    });\n  }, [targetElem]);\n  useEffect(hideMovableBoxStyle, [targetElem]);\n\n  const handleDragStart = (e: OnDragStart) => {\n    e.set([convertToAbsCoord(sticker.locX), convertToAbsCoord(sticker.locY)]);\n  };\n  const handleOnDrag = (e: OnDrag) => {\n    const positionX = convertToRelativeCoord(e.beforeTranslate[0]);\n    const positionY = convertToRelativeCoord(e.beforeTranslate[1]);\n    e.target.style.transform = `translate(${positionX}vh, ${positionY}vh)`;\n  };\n  const handleDragEnd = (e: OnDragEnd) => {\n    if (e.lastEvent) {\n      const positionX = convertToRelativeCoord(e.lastEvent.beforeTranslate[0]);\n      const positionY = convertToRelativeCoord(e.lastEvent.beforeTranslate[1]);\n      handleUpdateStickers({\n        ...sticker,\n        locX: positionX,\n        locY: positionY,\n      });\n    }\n  };\n\n  return (\n    <>\n      <Moveable\n        target={targetElem}\n        draggable={true}\n        onDragStart={handleDragStart}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <MoveableStickerContainer className={`target-${sticker.stickedStickerId}`}>\n        <StickerImg alt=\"sticker\" src={sticker.stickerImg} />\n      </MoveableStickerContainer>\n    </>\n  );\n};\n\nexport const MoveableStickerContainer = tw.div`\nz-10 flex absolute cursor-pointer\n`;\n\nexport const StickerImg = tw.img`\nh-[7vh]\n`;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSetRecoilState } from \"recoil\";\nimport tw from \"tailwind-styled-components\";\nimport { Menu, Transition } from \"@headlessui/react\";\n\nimport { PRIVATE_ROUTE } from \"src/router/ROUTE_INFO\";\nimport { isDeleteModalVisibleAtom } from \"src/recoil/diary-detail\";\nimport { DeleteInfo, deleteInfoAtom } from \"src/recoil/diary-detail/atom\";\nimport menuImg from \"../../assets/icons/menu.png\";\nimport dropdownImg from \"../../assets/icons/dropdown_menu.png\";\nimport pencilImg from \"../../assets/icons/pencil.png\";\nimport trashCanImg from \"../../assets/icons/trash-can.png\";\n\ninterface DropdownMenuProps {\n  setCommentIsBeingEdited?: (state: boolean) => void;\n  deleteInfo: DeleteInfo;\n}\n\nexport const DropdownMenu = ({ setCommentIsBeingEdited, deleteInfo }: DropdownMenuProps) => {\n  const navigate = useNavigate();\n  const setIsDeleteModalVisible = useSetRecoilState(isDeleteModalVisibleAtom);\n  const setDeleteInfo = useSetRecoilState(deleteInfoAtom);\n  const [isDropdownActivatied, setIsDropdownActivatied] = useState<boolean>(false);\n  const dropdownButtonRef = useRef<HTMLButtonElement>(null);\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      if (dropdownButtonRef.current && !dropdownButtonRef.current.contains(e.target as Node)) {\n        setIsDropdownActivatied(false);\n      }\n    };\n    window.addEventListener(\"mousedown\", handleClick);\n    return () => window.removeEventListener(\"mousedown\", handleClick);\n  }, [dropdownButtonRef]);\n\n  const changeDropdownState = () => {\n    setIsDropdownActivatied((prev) => !prev);\n  };\n\n  const dropdownMenuImgSrc = isDropdownActivatied ? dropdownImg : menuImg;\n\n  return (\n    <Menu as=\"div\" className=\"relative my-auto ml-auto\">\n      <Menu.Button ref={dropdownButtonRef}>\n        <DropdownMenuIcon onClick={changeDropdownState} src={dropdownMenuImgSrc} />\n      </Menu.Button>\n      <Transition\n        as={React.Fragment}\n        enter=\"transition duration-150 ease-out\"\n        enterFrom=\"transform scale-50 opacity-0\"\n        enterTo=\"transform scale-100 opacity-100\"\n        leave=\"transition duration-150 ease-out\"\n        leaveFrom=\"transform scale-100 opacity-100\"\n        leaveTo=\"transform scale-50 opacity-0\"\n      >\n        <Menu.Items className=\"absolute z-20 right-1 bg-white/60 backdrop-blur-3xl p-1 md:p-3 rounded-xl shadow-lg\">\n          <Menu.Item>\n            <ButtonContainer\n              onClick={() => {\n                if (setCommentIsBeingEdited) return setCommentIsBeingEdited(true);\n                navigate(PRIVATE_ROUTE.diaryRevision.path.split(\"/\").reverse()[0]);\n              }}\n            >\n              <ButtonIconImg src={pencilImg} />\n              <ButtonDesc>수정</ButtonDesc>\n            </ButtonContainer>\n          </Menu.Item>\n          <Menu.Item>\n            <ButtonContainer\n              onClick={() => {\n                setDeleteInfo(deleteInfo);\n                setIsDeleteModalVisible(true);\n              }}\n            >\n              <ButtonIconImg src={trashCanImg} />\n              <ButtonDesc>삭제</ButtonDesc>\n            </ButtonContainer>\n          </Menu.Item>\n        </Menu.Items>\n      </Transition>\n    </Menu>\n  );\n};\n\nconst DropdownMenuIcon = tw.img`\nw-[15px] h-[15px] min-[390px]:w-[19px] min-[390px]:h-[19px] md:w-[24px] md:h-[24px] \nml-auto cursor-pointer hover:opacity-50 ease-in duration-300\n`;\n\nconst ButtonContainer = tw.div`\nflex w-[9vh] py-[0.4vh] px-[1.2vh] cursor-pointer mx-auto\nhover:opacity-50 ease-in duration-300 \n`;\n\nconst ButtonIconImg = tw.img`\nh-[1.7vh] my-auto\n`;\n\nconst ButtonDesc = tw.p`\nfont-sans text-[1.6vh] ml-auto\n`;\n","export const API_URL = Object.freeze({\n  kakaoLogin: \"/api/login/kakao\",\n  naverLogin: \"/api/login/naver\",\n  emailLogin: \"/api/login/local\",\n  refreshToken: \"/api/login/silent-refresh\",\n  signOut: \"/api/login/logout\",\n  withdrawal: \"/api/users/withdrawal\",\n  users: \"/api/users\",\n  profile: \"/api/users/image\",\n  books: \"/api/books\",\n  inviteCodeInput: \"/api/books/invtt-code\",\n  inviteCode: function (bookId: number) {\n    return this.books + `/${bookId}/invtt-code`;\n  },\n  members: function (bookId: number) {\n    return this.books + `/${bookId}/members`;\n  },\n  bookDiary: function (bookId: number) {\n    return this.books + `/${bookId}/diaries`;\n  },\n  diaryList: function (bookId: number, limit: number, startIdx: number) {\n    return this.bookDiary(bookId) + `?limit=${limit}&start=${startIdx}`;\n  },\n  diary: \"/api/diaries\",\n  diaryImg: function (diaryId: string) {\n    return this.diary + `/image/${diaryId}`;\n  },\n  comments: \"/api/comments\",\n  diaryComments: function (diaryId: number) {\n    return this.comments + `?diaryId=${diaryId}`;\n  },\n  myPackages: \"/api/packages/mine\",\n  stickers: function (diaryId: number) {\n    return this.diary + `/${diaryId}/stickers`;\n  },\n  grape: \"/api/users/grape\",\n  package: function (packageId: number) {\n    return `/api/packages/${packageId}`;\n  },\n  shop: \"/api/packages/shop\",\n});\n","import { atom } from \"recoil\";\nimport { recoilPersist } from \"recoil-persist\";\n\nconst { persistAtom } = recoilPersist();\n\nexport interface DeleteInfo {\n  id: number | undefined;\n  target: \"diary\" | \"comment\" | undefined;\n}\n\nexport const focusedDiaryIdAtom = atom<number>({\n  key: \"focusedDiaryIdAtom\",\n  default: undefined,\n  effects_UNSTABLE: [persistAtom],\n});\n\nexport const forceRefreshCommentsAtom = atom<number>({\n  key: \"forceReloadCommentsAtom\",\n  default: 0,\n});\n\nexport const isDeleteModalVisibleAtom = atom<boolean>({\n  key: \"isDeleteModalVisibleAtom\",\n  default: false,\n});\n\nexport const deleteInfoAtom = atom<DeleteInfo>({\n  key: \"deleteInfoAtom\",\n  default: {\n    id: undefined,\n    target: undefined,\n  },\n});\n","import { selector } from \"recoil\";\n\nimport { api } from \"src/utils/axiosApi/api\";\nimport { API_URL } from \"src/constants/API_URL\";\nimport { forceRefreshCommentsAtom, focusedDiaryIdAtom } from \"src/recoil/diary-detail/atom\";\n\nexport { focusedDiaryIdAtom, isDeleteModalVisibleAtom, deleteInfoAtom } from \"./atom\";\n\nexport const getComments = selector({\n  key: \"getComments\",\n  get: async ({ get }) => {\n    get(forceRefreshCommentsAtom);\n    const diaryId = get(focusedDiaryIdAtom);\n    try {\n      if (!diaryId) return [];\n      const { data } = await api.get(API_URL.diaryComments(diaryId));\n      return data.data;\n    } catch (err) {\n      if (err instanceof Error) alert(err.message);\n    }\n  },\n  set: ({ set }) => {\n    return set(forceRefreshCommentsAtom, Math.random());\n  },\n});\n","import axios from \"axios\";\nimport { getAccessToken } from \"src/utils/token\";\nimport { defaultApi } from \"./defaultApi\";\n\nexport const api = axios.create({ ...defaultApi.defaults });\n\napi.interceptors.response = defaultApi.interceptors.response;\n\napi.interceptors.request.use(\n  (config) => {\n    config.headers[\"Content-Type\"] = \"application/json\";\n    config.headers[\"Authorization\"] = `Bearer ${getAccessToken()}`;\n    config.withCredentials = true;\n    return config;\n  },\n  (error) => {\n    Promise.reject(error);\n  }\n);\n","import axios from \"axios\";\nimport { getAccessToken, refreshToken } from \"src/utils/token\";\n\nlet isTokenRefreshing = false;\nlet failedTaskQueue: Callback[] = [];\ntype Callback = () => void;\n\nconst onTokenRefreshed = () => {\n  failedTaskQueue.map((callback) => callback());\n  failedTaskQueue = [];\n};\n\nconst addRefreshSubscriber = (callback: Callback) => {\n  failedTaskQueue.push(callback);\n};\n\nexport const defaultApi = axios.create({ baseURL: process.env.REACT_APP_SERVER_URL });\n\ndefaultApi.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async (error) => {\n    const {\n      config,\n      response: { status },\n    } = error;\n    const originalRequest = config;\n    if (status === 401 && error.response.data.statusCode === \"10003\") {\n      if (!isTokenRefreshing) {\n        isTokenRefreshing = true;\n        await refreshToken();\n        originalRequest.headers.authorization = `Bearer ${getAccessToken()}`;\n        isTokenRefreshing = false;\n        axios(originalRequest);\n        onTokenRefreshed();\n      }\n      const retryOriginalRequest = new Promise((resolve) => {\n        if (isTokenRefreshing) {\n          addRefreshSubscriber(() => {\n            originalRequest.headers.Authorization = `Bearer ${getAccessToken()}`;\n            resolve(axios(originalRequest));\n          });\n        }\n      });\n      return retryOriginalRequest;\n    }\n    throw new Error(error.response.data.message);\n  }\n);\n","export const convertToRelativeCoord = (x: number) => {\n  const viewHeight = window.innerHeight;\n  return (x / viewHeight) * 100;\n};\n\nexport const convertToAbsCoord = (x: number) => {\n  const viewHeight = window.innerHeight;\n  return (x / 100) * viewHeight;\n};\n","import jwt_decode from \"jwt-decode\";\nimport { Token } from \"src/recoil/token/atom\";\n\ninterface DecodedToken {\n  userId: number;\n}\n\nexport const getUserId = (accessToken: Token) => {\n  if (!accessToken) return undefined;\n  const decodedUserInfo: DecodedToken = jwt_decode(accessToken);\n  return decodedUserInfo.userId;\n};\n","function changeToKoreanTime(timestamp: Date) {\n  const date = new Date(timestamp);\n  return date.toLocaleString(\"ko-KR\");\n}\n\nexport default changeToKoreanTime;\n","import { API_URL } from \"src/constants/API_URL\";\nimport { api } from \"src/utils/axiosApi/api\";\nimport { ACCESS_TOKEN_KEY, Token } from \"src/recoil/token/atom\";\nimport { PRIVATE_ROUTE } from \"src/router/ROUTE_INFO\";\n\nexport const getAccessToken = () => {\n  const recoilPersist = localStorage.getItem(\"recoil-persist\");\n  if (recoilPersist) return JSON.parse(recoilPersist)[ACCESS_TOKEN_KEY];\n};\nexport const setToken = (accessToken: Token) => {\n  if (!accessToken) return localStorage.setItem(\"recoil-persist\", \"{}\");\n  localStorage.setItem(\n    \"recoil-persist\",\n    `{\n    \"${ACCESS_TOKEN_KEY}\": \"${accessToken}\"\n  }`\n  );\n};\n\nexport const refreshToken = async (setTokenState?: (token: string) => void) => {\n  try {\n    const { data } = await api.post(API_URL.refreshToken);\n    setToken(data.data.accessToken);\n    if (setTokenState) setTokenState(data.data.accessToken);\n  } catch {\n    setToken(undefined);\n    alert(\"로그인이 필요합니다 🪪\");\n    window.location.reload();\n  }\n};\n\nexport const moveToDiaries = (accessToken: Token) => {\n  const urlObj = new URL(window.location.href);\n  urlObj.search = \"\";\n  const rootUrl = String(urlObj).includes(\"#\") ? String(urlObj) : String(urlObj) + \"#/\"; // MEMO: for gh-pages Hash Router\n  if (accessToken) {\n    setTimeout(() => {\n      window.location.replace(rootUrl + PRIVATE_ROUTE.books.path.substring(1));\n    }, 3000);\n  }\n};\n"],"names":["BackButtonImg","tw","navigate","useNavigate","alt","src","onClick","UnclickableContainer","ProfileImg","Nickname","Date","DiarySection","data","isDetailPage","accessToken","useRecoilValue","accessTokenAtom","isDiaryWriter","getUserId","userId","profileImgSrc","profile","DefaultProfileImg","hasPicture","picture","isRevised","createdAt","updatedAt","useState","isLoading","setIsLoading","className","nickname","changeToKoreanTime","DropdownMenu","deleteInfo","id","diaryId","target","PhotoSkeleton","Photo","String","onLoad","style","display","DiaryTitle","title","DiaryContent","content","Skeleton","AffixedSticker","sticker","handleUpdateStickers","targetElem","setTargetElem","useEffect","document","querySelector","stickedStickerId","transform","locX","locY","hideMovableBoxStyle","useCallback","Array","from","querySelectorAll","map","moveableBox","visibility","draggable","onDragStart","e","set","convertToAbsCoord","onDrag","positionX","convertToRelativeCoord","beforeTranslate","positionY","onDragEnd","lastEvent","MoveableStickerContainer","StickerImg","stickerImg","setCommentIsBeingEdited","setIsDeleteModalVisible","useSetRecoilState","isDeleteModalVisibleAtom","setDeleteInfo","deleteInfoAtom","isDropdownActivatied","setIsDropdownActivatied","dropdownButtonRef","useRef","handleClick","current","contains","window","addEventListener","removeEventListener","dropdownMenuImgSrc","dropdownImg","as","ref","DropdownMenuIcon","prev","React","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","ButtonContainer","PRIVATE_ROUTE","reverse","ButtonIconImg","pencilImg","ButtonDesc","trashCanImg","API_URL","Object","freeze","kakaoLogin","naverLogin","emailLogin","refreshToken","signOut","withdrawal","users","books","inviteCodeInput","inviteCode","bookId","this","members","bookDiary","diaryList","limit","startIdx","diary","diaryImg","comments","diaryComments","myPackages","stickers","grape","package","packageId","shop","persistAtom","recoilPersist","focusedDiaryIdAtom","atom","key","default","undefined","effects_UNSTABLE","forceRefreshCommentsAtom","getComments","selector","get","api","Error","alert","message","Math","random","axios","defaultApi","interceptors","response","request","use","config","headers","getAccessToken","withCredentials","error","Promise","reject","isTokenRefreshing","failedTaskQueue","baseURL","process","status","originalRequest","statusCode","authorization","callback","retryOriginalRequest","resolve","Authorization","push","x","innerHeight","jwt_decode","timestamp","toLocaleString","localStorage","getItem","JSON","parse","ACCESS_TOKEN_KEY","setToken","setItem","setTokenState","location","reload","moveToDiaries","urlObj","URL","href","search","rootUrl","includes","setTimeout","replace"],"sourceRoot":""}