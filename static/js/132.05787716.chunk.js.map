{"version":3,"file":"static/js/132.05787716.chunk.js","mappings":"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","sources":["recoil/new-diary/atom.ts","components/new-diary/DiaryImgUpload.tsx","components/new-diary/NewDiaryForm.tsx","pages/NewDiary.tsx","../node_modules/react-reveal/Fade.js"],"sourcesContent":["import { atom } from \"recoil\";\n\nexport type Img = string | Blob;\n\nexport const diaryImgAtom = atom<Img>({\n  key: \"diaryImgAtom\",\n  default: \"\",\n});\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { useRecoilState, useResetRecoilState } from \"recoil\";\n\nimport { diaryImgAtom } from \"src/recoil/new-diary\";\nimport { compressImg } from \"src/utils/compressImg\";\nimport { convertHEICToJPG, isHEICFile } from \"src/utils/handleHEIC\";\nimport imgUploadIcon from \"../../assets/icons/image.png\";\nimport trashCanIcon from \"../../assets/icons/trash-can-white.png\";\nimport {\n  UploadedImg,\n  TrashCanIcon,\n  ImgUploadContainer,\n  ImgUploadIcon,\n} from \"../diary/DairyImgUploadElem\";\n\nconst DiaryImgUpload = () => {\n  const reader = new FileReader();\n  const imgRef = useRef<HTMLInputElement>(null);\n  const [diaryImg, setDiaryImg] = useRecoilState(diaryImgAtom);\n  const resetDiaryImg = useResetRecoilState(diaryImgAtom);\n  const [imgPreview, setImgPreview] = useState<string | ArrayBuffer | null>(\"\");\n\n  const saveImgFile = async () => {\n    if (imgRef?.current?.files) {\n      let file = imgRef.current.files[0];\n      if (isHEICFile(file)) file = await convertHEICToJPG(file);\n      const compressedImg = await compressImg(file);\n      if (compressedImg) file = compressedImg;\n      setDiaryImg(file);\n      reader.readAsDataURL(file);\n      reader.onloadend = () => {\n        setImgPreview(reader.result);\n      };\n    }\n  };\n\n  const deleteImgFile = () => {\n    if (typeof diaryImg === \"string\") URL.revokeObjectURL(diaryImg);\n    setDiaryImg(\"\");\n  };\n\n  useEffect(() => {\n    return () => {\n      resetDiaryImg();\n    };\n  }, []);\n\n  return (\n    <React.Fragment>\n      {diaryImg ? (\n        <div className=\"relative overflow-auto\">\n          <UploadedImg src={imgPreview ? imgPreview : imgUploadIcon}></UploadedImg>\n          <TrashCanIcon onClick={() => deleteImgFile()} src={trashCanIcon} />\n        </div>\n      ) : (\n        <ImgUploadContainer onClick={() => imgRef?.current?.click()}>\n          <ImgUploadIcon alt=\"upload\" src={imgUploadIcon} />\n          <input\n            className=\"hidden\"\n            type=\"file\"\n            accept=\"image/bmp,image/jpeg, image/jpg, image/png, image/heic, image/gif\"\n            onChange={saveImgFile}\n            ref={imgRef}\n          />\n        </ImgUploadContainer>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default DiaryImgUpload;\n","import React from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { useForm } from \"react-hook-form\";\n\nimport DiaryImgUpload from \"./DiaryImgUpload\";\nimport { diaryImgAtom } from \"src/recoil/new-diary/atom\";\nimport { Img } from \"src/recoil/new-diary/atom\";\nimport { API_URL } from \"src/constants/API_URL\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { DiaryForm, TitleInput, inputStyle, ContentInput } from \"../diary/DiaryFormElem\";\nimport { DiaryInput } from \"../diary/DiaryInput\";\nimport { formApi } from \"src/utils/axiosApi/formApi\";\n\nconst createDiaryForm = (diaryImg: Img, bookId: string, { title, content }: DiaryInput) => {\n  const formData = new FormData();\n  if (diaryImg) formData.append(\"picture\", diaryImg);\n  formData.append(\"bookId\", bookId);\n  formData.append(\"title\", title);\n  formData.append(\"content\", content);\n\n  return formData;\n};\n\nconst NewDiaryForm = () => {\n  const navigate = useNavigate();\n  const params = useParams();\n  const bookId = String(params.bookId);\n  const diaryImg = useRecoilValue(diaryImgAtom);\n  const { register, handleSubmit } = useForm<DiaryInput>({ mode: \"onSubmit\" });\n\n  const onSubmitDiaryForm = async ({ title, content }: DiaryInput) => {\n    const formData = createDiaryForm(diaryImg, bookId, { title, content });\n    try {\n      await formApi.post(API_URL.diary, formData);\n      navigate(-1);\n    } catch (err) {\n      if (err instanceof Error) alert(err.message);\n    }\n  };\n\n  return (\n    <DiaryForm id=\"diary\" onSubmit={handleSubmit(onSubmitDiaryForm)}>\n      <TitleInput\n        className={`${inputStyle}`}\n        placeholder=\"제목을 입력해주세요.\"\n        minLength={2}\n        maxLength={30}\n        required\n        {...register(\"title\")}\n      />\n      <DiaryImgUpload />\n      <ContentInput\n        className={`${inputStyle}`}\n        placeholder=\"내용을 입력해주세요.\"\n        minLength={2}\n        maxLength={400}\n        required\n        {...register(\"content\")}\n      />\n    </DiaryForm>\n  );\n};\n\nexport default NewDiaryForm;\n","import React from \"react\";\nimport Fade from \"react-reveal/Fade\";\n\nimport { PinkPurpleBackground } from \"src/components/common/Backgrounds\";\nimport BackButton from \"src/components/common/BackButton\";\nimport PostButton from \"src/components/diary/PostButton\";\nimport PageTitle from \"src/components/common/PageTitle\";\nimport NewDiaryForm from \"src/components/new-diary/NewDiaryForm\";\n\nconst NewDiary = () => {\n  return (\n    <PinkPurpleBackground>\n      <BackButton />\n      <PostButton />\n      <PageTitle title=\"일기 작성\" />\n      <Fade bottom>\n        <NewDiaryForm />\n      </Fade>\n    </PinkPurpleBackground>\n  );\n};\n\nexport default NewDiary;\n","\"use strict\";function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}function _objectWithoutProperties(o,e){var r={};for(var t in o)e.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r}function make(o,e){var r=e.distance,t=e.left,p=e.right,a=e.up,l=e.down,i=e.top,u=e.bottom,n=e.big,s=e.mirror,d=e.opposite,_=(r?r.toString():0)+((t?1:0)|(p?2:0)|(i||l?4:0)|(u||a?8:0)|(s?16:0)|(d?32:0)|(o?64:0)|(n?128:0));if(lookup.hasOwnProperty(_))return lookup[_];var f=t||p||a||l||i||u,y=void 0,b=void 0;if(f){if(!s!=!(o&&d)){var v=[p,t,u,i,l,a];t=v[0],p=v[1],i=v[2],u=v[3],a=v[4],l=v[5]}var c=r||(n?\"2000px\":\"100%\");y=t?\"-\"+c:p?c:\"0\",b=l||i?\"-\"+c:a||u?c:\"0\"}return lookup[_]=(0,_globals.animation)((o?\"to\":\"from\")+\" {opacity: 0;\"+(f?\" transform: translate3d(\"+y+\", \"+b+\", 0);\":\"\")+\"}\\n     \"+(o?\"from\":\"to\")+\" {opacity: 1;transform: none;} \"),lookup[_]}function Fade(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_globals.defaults,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=o.children,t=(o.out,o.forever),p=o.timeout,a=o.duration,l=void 0===a?_globals.defaults.duration:a,i=o.delay,u=void 0===i?_globals.defaults.delay:i,n=o.count,s=void 0===n?_globals.defaults.count:n,d=_objectWithoutProperties(o,[\"children\",\"out\",\"forever\",\"timeout\",\"duration\",\"delay\",\"count\"]),_={make:make,duration:void 0===p?l:p,delay:u,forever:t,count:s,style:{animationFillMode:\"both\"},reverse:d.left};return e?(0,_wrap2.default)(d,_,_,r):_}Object.defineProperty(exports,\"__esModule\",{value:!0});var _propTypes=require(\"prop-types\"),_globals=require(\"./globals\"),_wrap=require(\"./wrap\"),_wrap2=_interopRequireDefault(_wrap),propTypes={out:_propTypes.bool,left:_propTypes.bool,right:_propTypes.bool,top:_propTypes.bool,bottom:_propTypes.bool,big:_propTypes.bool,mirror:_propTypes.bool,opposite:_propTypes.bool,duration:_propTypes.number,timeout:_propTypes.number,distance:_propTypes.string,delay:_propTypes.number,count:_propTypes.number,forever:_propTypes.bool},lookup={};Fade.propTypes=propTypes,exports.default=Fade,module.exports=exports.default;"],"names":["diaryImgAtom","atom","key","default","reader","FileReader","imgRef","useRef","useRecoilState","diaryImg","setDiaryImg","resetDiaryImg","useResetRecoilState","useState","imgPreview","setImgPreview","saveImgFile","current","files","file","isHEICFile","convertHEICToJPG","compressImg","compressedImg","readAsDataURL","onloadend","result","useEffect","className","src","imgUploadIcon","onClick","URL","revokeObjectURL","trashCanIcon","click","alt","type","accept","onChange","ref","createDiaryForm","bookId","title","content","formData","FormData","append","navigate","useNavigate","params","useParams","String","useRecoilValue","useForm","mode","register","handleSubmit","onSubmitDiaryForm","formApi","API_URL","Error","alert","message","id","onSubmit","inputStyle","placeholder","minLength","maxLength","required","BackButton","PostButton","PageTitle","bottom","_objectWithoutProperties","o","e","r","t","indexOf","Object","prototype","hasOwnProperty","call","make","distance","left","p","right","a","up","l","down","i","top","u","n","big","s","mirror","d","opposite","_","toString","lookup","f","y","b","v","c","_globals","animation","Fade","arguments","length","defaults","children","out","forever","timeout","duration","delay","count","style","animationFillMode","reverse","_wrap2","defineProperty","exports","value","_propTypes","require","_wrap","__esModule","propTypes","bool","number","string","module"],"sourceRoot":""}