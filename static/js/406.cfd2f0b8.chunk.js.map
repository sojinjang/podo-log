{"version":3,"file":"static/js/406.cfd2f0b8.chunk.js","mappings":"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","sources":["recoil/sign-up/atom.ts","components/sign-up/ProfileImgUpload.tsx","components/sign-up/EmailSignUpContainer.tsx","pages/SignUp.tsx","utils/axiosApi/formApi.ts","utils/compressImg.ts","utils/handleHEIC.ts"],"sourcesContent":["import { atom } from \"recoil\";\n\nexport type Img = string | Blob;\n\nexport const profileImgAtom = atom<Img>({\n  key: \"profileImgAtom\",\n  default: \"\",\n});\n","import { useState, useEffect, useRef } from \"react\";\nimport { useRecoilState, useResetRecoilState } from \"recoil\";\n\nimport { profileImgAtom } from \"src/recoil/sign-up\";\nimport { compressImg } from \"src/utils/compressImg\";\nimport { isHEICFile, convertHEICToJPG } from \"src/utils/handleHEIC\";\nimport DefaultProfileImg from \"src/assets/icons/default_profile.png\";\nimport * as G from \"src/styles/Common\";\n\nexport const ProfileImgUpload = () => {\n  const [profileImg, setProfileImg] = useRecoilState(profileImgAtom);\n  const resetProfileImg = useResetRecoilState(profileImgAtom);\n  const [imgPreview, setImgPreview] = useState<string | ArrayBuffer | null>(\"\");\n  const imgRef = useRef<HTMLInputElement>(null);\n  const reader = new FileReader();\n\n  const saveImgFile = async () => {\n    if (imgRef?.current?.files) {\n      let file = imgRef.current.files[0];\n      if (isHEICFile(file)) file = await convertHEICToJPG(file);\n      const compressedImg = await compressImg(file);\n      if (compressedImg) file = compressedImg;\n      setProfileImg(file);\n      reader.readAsDataURL(file);\n      reader.onloadend = () => {\n        setImgPreview(reader.result);\n      };\n    }\n  };\n\n  const deleteImgFile = () => {\n    if (typeof profileImg === \"string\") URL.revokeObjectURL(profileImg);\n    setProfileImg(\"\");\n  };\n\n  useEffect(() => {\n    return () => {\n      resetProfileImg();\n    };\n  }, []);\n\n  return (\n    <div className=\"m-auto text-center\">\n      <G.ProfileImg alt=\"profile\" src={profileImg ? imgPreview : DefaultProfileImg} />\n      {!profileImg && (\n        <G.ProfileImgDescription htmlFor=\"profileImg\">\n          ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ Ï∂îÍ∞Ä\n        </G.ProfileImgDescription>\n      )}\n      {profileImg && (\n        <G.ProfileImgDescription onClick={deleteImgFile}>\n          ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú\n        </G.ProfileImgDescription>\n      )}\n      <input\n        className=\"hidden\"\n        type=\"file\"\n        accept=\"image/bmp,image/jpeg, image/jpg, image/png, image/heic\"\n        onChange={saveImgFile}\n        ref={imgRef}\n      />\n    </div>\n  );\n};\n","import { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useRecoilValue } from \"recoil\";\n\nimport { SignUpInput } from \"src/@types/input\";\nimport { profileImgAtom } from \"src/recoil/sign-up\";\nimport { Img } from \"src/recoil/sign-up/atom\";\nimport { PUBLIC_ROUTE } from \"src/router/ROUTE_INFO\";\nimport { API_URL } from \"src/constants/API_URL\";\nimport { ProfileImgUpload } from \"./ProfileImgUpload\";\nimport PurpleButton from \"../common/PurpleButton\";\nimport { formApi } from \"src/utils/axiosApi/formApi\";\nimport * as G from \"src/styles/Common\";\nimport * as S from \"src/styles/Home\";\n\nconst createSignUpForm = (profileImg: Img, { nickname, email, password }: SignUpInput) => {\n  const formData = new FormData();\n  if (profileImg) formData.append(\"profile\", profileImg);\n  formData.append(\"nickname\", nickname);\n  formData.append(\"email\", email);\n  formData.append(\"password\", password);\n\n  return formData;\n};\n\nconst EmailSignUpContainer = () => {\n  const navigate = useNavigate();\n  const profileImg = useRecoilValue(profileImgAtom);\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    formState: { errors },\n  } = useForm<SignUpInput>({ mode: \"onChange\" });\n\n  const pwConfirmRegister = register(\"pwConfirm\", {\n    validate: (pwconfirm: string | undefined) => {\n      const { password } = getValues();\n      return password === pwconfirm || \"ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌïòÏßÄ ÏïäÏäµÎãàÎã§.\";\n    },\n  });\n\n  const onSubmitSignUp = async ({ nickname, email, password }: SignUpInput) => {\n    const formData = createSignUpForm(profileImg, { nickname, email, password });\n    try {\n      await formApi.post(API_URL.users, formData);\n      confirm(\"Welcome to PODOLOG! üçá\");\n      navigate(PUBLIC_ROUTE.home.path);\n    } catch (err) {\n      if (err instanceof Error) alert(err.message);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmitSignUp)} encType=\"multipart/form-data\">\n      <ProfileImgUpload />\n      <G.InputContainer>\n        <G.Input placeholder=\"nickname\" minLength={2} required {...register(\"nickname\")} />\n      </G.InputContainer>\n      <G.InputContainer>\n        <G.Input placeholder=\"email\" type=\"email\" required {...register(\"email\")} />\n      </G.InputContainer>\n      <G.InputContainer>\n        <G.Input\n          placeholder=\"password\"\n          type=\"password\"\n          minLength={4}\n          required\n          {...register(\"password\")}\n        />\n      </G.InputContainer>\n      <div className=\"w-[65%] mx-auto\">\n        <G.InputContainer className=\"w-full\">\n          <G.Input\n            placeholder=\"confirm password\"\n            type=\"password\"\n            minLength={4}\n            required\n            {...pwConfirmRegister}\n          />\n        </G.InputContainer>\n        {errors.pwConfirm && <S.PwConfirmMsg>{errors.pwConfirm.message}</S.PwConfirmMsg>}\n      </div>\n      <PurpleButton\n        description=\"Sign Up\"\n        wrapperStyle=\"mt-[3vh] w-full\"\n        buttonStyle=\"w-[65%]\"\n      />\n    </form>\n  );\n};\n\nexport default EmailSignUpContainer;\n","import Fade from \"react-reveal/Fade\";\n\nimport { Greeting, SNSLoginContainer } from \"../components/home\";\nimport { EmailSignUpContainer } from \"src/components/sign-up/\";\nimport * as G from \"src/styles/Common\";\nimport \"src/styles/Backgrounds.css\";\n\nconst SignUp = () => {\n  return (\n    <G.DefaultBackground className=\"animated-gradient\">\n      <Greeting />\n      <Fade duration={3000}>\n        <G.InputSectionContainer>\n          <EmailSignUpContainer />\n          <SNSLoginContainer sectionTitle=\"SNS Í≥ÑÏ†ï ÌöåÏõêÍ∞ÄÏûÖ\" />\n        </G.InputSectionContainer>\n      </Fade>\n    </G.DefaultBackground>\n  );\n};\n\nexport default SignUp;\n","import axios from \"axios\";\nimport { getAccessToken } from \"src/utils/token\";\nimport { defaultApi } from \"./defaultApi\";\n\nexport const formApi = axios.create({ ...defaultApi.defaults });\n\nformApi.interceptors.response = defaultApi.interceptors.response;\n\nformApi.interceptors.request.use(\n  (config) => {\n    config.headers[\"Content-Type\"] = \"multipart/form-data\";\n    config.headers[\"Authorization\"] = `Bearer ${getAccessToken()}`;\n    config.withCredentials = true;\n    return config;\n  },\n  (error) => {\n    Promise.reject(error);\n  }\n);\n","import imageCompression from \"browser-image-compression\";\n\nexport const compressImg = async (image: File) => {\n  const options = {\n    maxSizeMb: 1,\n    maxWidthOrHeight: 1000,\n  };\n  try {\n    const blob = await imageCompression(image, options);\n    return new File([blob], blob.name);\n  } catch (err) {\n    if (err instanceof Error) alert(err.message);\n  }\n};\n","export const isHEICFile = (file: File): boolean => {\n  return file.type === \"image/heic\" || file.type === \"image/HEIC\";\n};\n\nexport const convertHEICToJPG = async (file: File) => {\n  const heic2any = await import(\"heic2any\");\n  const jpgBlob = await heic2any.default({ blob: file, toType: \"image/jpeg\" });\n\n  return new File([jpgBlob as BlobPart], file.name.split(\".\")[0] + \".jpg\", {\n    type: \"image/jpeg\",\n  });\n};\n"],"names":["profileImgAtom","atom","key","default","ProfileImgUpload","useRecoilState","profileImg","setProfileImg","resetProfileImg","useResetRecoilState","useState","imgPreview","setImgPreview","imgRef","useRef","reader","FileReader","saveImgFile","current","files","file","isHEICFile","convertHEICToJPG","compressImg","compressedImg","readAsDataURL","onloadend","result","useEffect","className","alt","src","DefaultProfileImg","htmlFor","onClick","URL","revokeObjectURL","type","accept","onChange","ref","createSignUpForm","nickname","email","password","formData","FormData","append","navigate","useNavigate","useRecoilValue","useForm","mode","register","handleSubmit","getValues","errors","formState","pwConfirmRegister","validate","pwconfirm","onSubmitSignUp","formApi","API_URL","confirm","PUBLIC_ROUTE","Error","alert","message","onSubmit","encType","placeholder","minLength","required","pwConfirm","PurpleButton","description","wrapperStyle","buttonStyle","duration","sectionTitle","axios","defaultApi","interceptors","response","request","use","config","headers","getAccessToken","withCredentials","error","Promise","reject","image","options","maxSizeMb","maxWidthOrHeight","imageCompression","blob","File","name","heic2any","toType","jpgBlob","split"],"sourceRoot":""}